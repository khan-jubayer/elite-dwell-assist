!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("React")):"function"==typeof define&&define.amd?define(["React"],t):"object"==typeof exports?exports.ReactTagField=t(require("React")):e.ReactTagField=t(e.React)}(this,function(e){return function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={exports:{},id:i,loaded:!1};return e[i].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}(function(e){for(var t in e)switch(typeof e[t]){case"number":e[t]=e[e[t]];break;case"object":e[t]=function(t){var n=t.slice(1),i=e[t[0]];return function(e,t,a){i.apply(null,[e,t,a].concat(n))}}(e[t])}return e}([function(e,t,n){"use strict";function i(){}function a(e,t,n){return-1==t?e.concat(n):e.slice(0,t).concat(n).concat(e.slice(t))}var r=n(9),o=n(19),l=n(20),s=(n(26),n(30)),u=n(29),c=n(31),p=function(e){e.preventDefault()};e.exports=r.createClass({displayName:"ReactTagField",getSelectionStart:function(){return s(this.refs.field.getInput())},getSelectionEnd:function(){return u(this.refs.field.getInput())},setSelectionRange:function(e){e.start,e.end;c(this.refs.field.getInput(),e)},getDefaultProps:function(){return{minInputSize:3,selectedTagStyle:{background:"rgb(200, 200, 200)"},focusOnClick:!0,selectableTags:!0,clearTool:!1,tagOnBlur:!1,tagClearTool:!1,allowDuplicates:!1,editableTags:!0,delimiter:" ",tagClearToolColor:"#a8a8a8",defaultStyle:{overflow:"hidden"},defaultInputStyle:{flex:"none",alignSelf:"center"},defaultInnerStyle:{display:"inline-flex",flexFlow:"row wrap"},defaultTagStyle:{display:"inline-flex",boxSizing:"border-box",alignItems:"center",flex:"none",flexFlow:"row",padding:"6px 2px",marginLeft:2,marginTop:1,marginBottom:1,border:"1px solid gray",overflow:"hidden",whiteSpace:"nowrap"},defaultTagClearToolStyle:{cursor:"pointer"},validateTag:function(e){return""!==e&&null!=e}}},getInitialState:function(){return{defaultValue:this.props.defaultValue,defaultTags:this.props.defaultTags,activeTagIndex:-1}},getValue:function(){var e=void 0===this.props.value?this.state.defaultValue:this.props.value;return e},render:function(){var e=this.prepareProps(this.props,this.state),t=Math.max(e.value?e.value.length:0,this.props.minInputSize);return r.createElement(o,r.__spread({ref:"field"},e,{inputProps:{size:t}}))},getInfoForValue:function(e,t){var n=this.props,i=this.state,a=i.activeTagIndex,r=e.split(n.delimiter),o=r[r.length-1],l={};return n.allowDuplicates||(t=t||this.prepareTags(this.props),t.forEach(function(e,t){t!=a&&(l[e]=!0)})),r=r.slice(0,r.length-1).filter(function(e){return e&&!l[e]}),{tags:r,value:o}},handleClick:function(e,t){t.nativeEvent.tagClick||(this.props.focusOnClick&&this.focus(),this.setState({activeTagIndex:-1})),(this.props.onClick||i)(t)},handleBlur:function(e,t){e.tagOnBlur&&e.validateTag(e.value)&&this.handleChange(e,e.value+e.delimiter,null,t),(this.props.onBlur||i)(t)},handleChange:function(e,t,n,i){var r=this.state,o=this.getInfoForValue(t,e.tags),l=o.tags,s=e.editableTags?a(e.tags,r.activeTagIndex,l):[].concat(e.tags).concat(l);l.length&&-1!=r.activeTagIndex&&e.editableTags&&this.setState({activeTagIndex:r.activeTagIndex+1}),this.notifyChange(e,o.value,s,i)},notifyChange:function(e,t,n,a){var r={};(this.props.onChangeTags||i)(n),null==this.props.tags&&(r.defaultTags=n),null==this.props.value&&(r.defaultValue=t),this.setState(r),(this.props.onChange||i)(t,this.props,a)},handleKeyDown:function(e,t){var n=t.key;if(this.props.onKeyDown&&this.props.onKeyDown(t),e.tags.length&&e.editableTags&&("Backspace"==n||"ArrowLeft"==n||"ArrowRight"==n||"Delete"==n)){var i,a,r=e.value+"",o=this.state.activeTagIndex,l=e.tags,s=this.getSelectionStart(),u=this.getSelectionEnd();u>s||(("ArrowLeft"==n||"Backspace"==n)&&(i=r.substring(0,s)),("ArrowRight"==n||"Delete"==n)&&(a=r.substring(u)),"Backspace"!=n&&"ArrowLeft"!=n||""!==i||(-1==o&&(o=l.length),o--,o>=0&&(this.setActiveTagIndex(e,o),t.preventDefault())),"ArrowRight"!=n&&"Delete"!=n||""!=a||!l[o]||(t.preventDefault(),this.setActiveTagIndex(e,o,function(){this.setSelectionRange({start:0,end:0})}.bind(this))))}},removeTag:function(e,t){var n=this.tags.filter(function(e,n){return n!==t}),i=this.state.activeTagIndex;-1!=i&&i>t&&this.setState({activeTagIndex:i-1}),this.notifyChange(e,e.value,n)},setActiveTagIndex:function(e,t,n){var a,r,o=e.value,l=e.validateTag(o),s=this.state,u=[],c=this.tags,p=0,d=c.length,f=s.activeTagIndex;if(e.editableTags){for(var h,g;d>p;p++)r=c[p],h=p==f,g=p!=t,h&&l&&u.push(o),g?u.push(r):a=r;-1==f?l&&u.push(o):l&&t>=f&&t++}else u=c,a=o;t>=u.length&&(t=-1),0>t&&(t=-1),this.setState({activeTagIndex:t},n||i),this.notifyChange(e,a,u)},prepareProps:function(e,t){var n=l({},e);return this.prepareStyles(n,t),n.tagStyle=this.prepareTagStyle(n,t),n.tags=this.tags=this.prepareTags(n),n.value=this.prepareValue(n,t),n.renderChildren=this.renderChildren.bind(this,n),n.onChange=this.handleChange.bind(this,n),n.onBlur=this.handleBlur.bind(this,n),n.onKeyDown=this.handleKeyDown.bind(this,n),n.onClick=this.handleClick.bind(this,n),n.focusOnClick=!1,n},prepareStyles:function(e,t){e.style=this.prepareStyle(e,t),e.innerStyle=l({},e.defaultInnerStyle,e.innerStyle),e.inputStyle=l({},e.defaultInputStyle,e.inputStyle),e.tagClearToolStyle=this.prepareTagClearToolStyle(e,t),delete e.defaultStyle,delete e.defaultInnerStyle,delete e.defaultInputStyle},prepareTagClearToolStyle:function(e){var t=l({},e.defaultTagClearToolStyle,{color:e.tagClearToolColor},e.tagClearToolStyle);return t},prepareStyle:function(e){var t=l({},e.defaultStyle,e.style);return t},prepareValue:function(){return this.getValue()},prepareTags:function(e){var t=e.tags,n=this.state;return null==t&&(t=n.defaultTags),t=Array.isArray(t)&&t.length?[].concat(t):[],t.filter(e.validateTag)},prepareTagStyle:function(e){return l({},e.defaultTagStyle,e.tagStyle)},renderChildren:function(e,t){var n=t,i=this.state,a=e.tags;return a.length&&(a=a.map(function(t,n){return this.renderTag(e,t,n)},this),n=-1!=i.activeTagIndex&&e.editableTags?a.slice(0,i.activeTagIndex).concat(t).concat(a.slice(i.activeTagIndex)):a.concat(t)),n.push(this.renderHiddenField(e)),n},renderHiddenField:function(e){return e.editableTags?void 0:r.createElement("input",{key:"hiddenFocusField",type:"text",ref:"hiddenFocusField",onFocus:this.onHiddenFocus,onKeyDown:this.onHiddenKeyDown.bind(this,e),style:{opacity:0,width:0,height:0,margin:0,boxSizing:"border-box",border:0}})},onHiddenKeyDown:function(e,t){t.preventDefault();var n=this.tags,i=n.length,a=this.state.activeTagIndex;if(i){var r,o=t.key;"ArrowLeft"==o&&(r=-1),"ArrowRight"==o&&(r=1);var l;if(r)l=a+r,0>l&&(l=i-1),l>=i&&(l=0),this.setActiveTagIndex(e,l);else if(("Delete"==o||"Backspace"==o)&&(this.removeTag(e,a),("Backspace"==o||a===i-1)&&(l=a-1,0>l&&(l=0),setTimeout(function(){this.setActiveTagIndex(e,l)}.bind(this),0)),1==i&&this.focus()),"Escape"==o)return this.setActiveTagIndex(e,-1),void this.focus()}},focusHidden:function(){this.getFocusField().getDOMNode().focus()},getFocusField:function(){return this.refs.field.refs.hiddenFocusField},renderTag:function(e,t,n){var i,a=e.tagClearTool;a&&(i="function"==typeof a?a():r.createElement("span",{style:e.tagClearToolStyle,onClick:this.onTagClearClick.bind(this,e,t,n)},"✖"));var o=e.tagStyle;return!e.editableTags&&n==this.state.activeTagIndex&&e.selectableTags&&(o=l({},o,e.selectedTagStyle)),r.createElement("span",{key:n,style:o,onMouseDown:p,onClick:this.onTagClick.bind(this,e,t,n)},t,i)},onTagClick:function(e,t,n,i){e.selectableTags&&this.focusHidden(),i.nativeEvent.tagClick=!0,i.nativeEvent.clearTag||this.setActiveTagIndex(e,n)},onTagClearClick:function(e,t,n,i){i.nativeEvent.clearTag=!0,this.removeTag(e,n)},notify:function(e,t){var n=this.refs.field;n.notify(e,t)},focus:function(){this.refs.field.focus()}})},function(e,t){(function(t){"use strict";var n;t.document&&(n=t.document.createElement("div")),e.exports=n}).call(t,function(){return this}())},[36,3,1],function(e){"use strict";e.exports=function(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}},1,[36,6,4],3,function(e){"use strict";e.exports={alignItems:1,justifyContent:1,flex:1,flexFlow:1,userSelect:1,transform:1,transition:1,transformOrigin:1,transformStyle:1,transitionProperty:1,transitionDuration:1,transitionTimingFunction:1,transitionDelay:1,borderImage:1,borderImageSlice:1,boxShadow:1,backgroundClip:1,backfaceVisibility:1,perspective:1,perspectiveOrigin:1,animation:1,animationDuration:1,animationName:1,animationDelay:1,animationDirection:1,animationIterationCount:1,animationTimingFunction:1,animationPlayState:1,animationFillMode:1,appearance:1}},7,function(t){t.exports=e},function(e){"use strict";function t(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=Object.assign||function(e){for(var n,i,a=t(e),r=1;r<arguments.length;r++){n=arguments[r],i=Object.keys(Object(n));for(var o=0;o<i.length;o++)a[i[o]]=n[i[o]]}return a}},[32,3,2,7],[38,2,11,1],[34,14,7],[35,3,2,1],function(e){"use strict";e.exports=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},[33,15,13,17,18],function(e){"use strict";e.exports=function(e,t){return t?Array.isArray(t)?t.map(e).filter(function(e){return!!e}):e(t):void 0}},[37,12],function(e,t,n){"use strict";function i(){}var a=n(10),r=n(9),o=n(16),l={"true":{display:"inline-block"},"false":{cursor:"text",color:"transparent"}},s={displayName:"ReactInputField",propTypes:{validate:r.PropTypes.oneOfType([r.PropTypes.func,r.PropTypes.bool]),isEmpty:r.PropTypes.func,clearTool:r.PropTypes.bool},getInitialState:function(){return{defaultValue:this.props.defaultValue}},getDefaultProps:function(){return{focusOnClick:!0,stopChangePropagation:!0,stopSelectPropagation:!0,defaultClearToolStyle:{fontSize:20,paddingRight:5,paddingLeft:5,alignSelf:"center",cursor:"pointer",userSelect:"none",boxSizing:"border-box"},clearToolColor:"#a8a8a8",clearToolOverColor:"#7F7C7C",defaultStyle:{border:"1px solid #a8a8a8",boxSizing:"border-box"},defaultInnerStyle:{userSelect:"none",width:"100%",display:"inline-flex",flexFlow:"row",alignItems:"stretch"},defaultInvalidStyle:{border:"1px solid rgb(248, 144, 144)"},defaultInputStyle:{flex:1,border:0,height:"100%",padding:"6px 2px",outline:"none",boxSizing:"border-box"},defaultInputInvalidStyle:{},emptyValue:"",inputClassName:"",inputProps:null,clearTool:!0,defaultClassName:"z-field",emptyClassName:"z-empty-value",invalidClassName:"z-invalid",toolsPosition:"right"}},render:function(){void 0===this.valid&&(this.valid=!0);var e=this.prepareProps(this.props,this.state);this.valid!==e.valid&&"function"==typeof e.onValidityChange&&setTimeout(function(){e.onValidityChange(e.valid,e.value,e)},0),this.valid=e.valid;var t=this.renderChildren(e,this.state),n=a({},e);return delete n.value,delete n.placeholder,r.createElement("div",r.__spread({},n),r.createElement("div",{style:e.innerStyle},t))},renderChildren:function(e,t){var n=this.renderField(e,t),i=this.renderTools(e,t),a=[n,e.children];return"after"==e.toolsPosition||"right"==e.toolsPosition?a.push.apply(a,i):a=(i||[]).concat(n),"function"==typeof e.renderChildren&&(a=e.renderChildren(a)),a},renderField:function(e){var t=this.prepareInputProps(e);return t.ref="input",e.inputFactory?e.inputFactory(t,e):r.createElement("input",r.__spread({},t))},renderTools:function(e,t){var n=this.renderClearTool(e,t),i=[n];return"function"==typeof e.tools&&(i=e.tools(e,n)),i},renderClearTool:function(e,t){if(e.clearTool&&!e.readOnly&&!e.disabled){var n=!this.isEmpty(e),i=l[n],o=a({},i,this.prepareClearToolStyle(e,t));return n||a(o,i),r.createElement("div",{key:"clearTool",className:"z-clear-tool",onClick:this.handleClearToolClick,onMouseDown:this.handleClearToolMouseDown,onMouseOver:this.handleClearToolOver,onMouseOut:this.handleClearToolOut,style:o},"✖")}},handleClearToolMouseDown:function(e){e.preventDefault()},handleClearToolOver:function(){this.setState({clearToolOver:!0})},handleClearToolOut:function(){this.setState({clearToolOver:!1})},isEmpty:function(e){var t=this.getEmptyValue(e);if("function"==typeof e.isEmpty)return e.isEmpty(e,t);var n=e.value;return null==n&&(n=""),n===t},getEmptyValue:function(e){var t=e.emptyValue;return"function"==typeof t&&(t=t(e)),t},isValid:function(e){var t=e.value,n=!0;return"function"==typeof e.validate&&(n=e.validate(t,e)!==!1),n},getInput:function(){return this.refs.input.getDOMNode()},focus:function(){var e=this.getInput();e&&"function"==typeof e.focus&&e.focus()},handleClick:function(e){this.props.focusOnClick&&!this.isFocused()&&this.focus(),(this.props.onClick||i)(e)},handleMouseDown:function(e){(this.props.onMouseDown||i)(e)},handleClearToolClick:function(e){this.notify(this.getEmptyValue(this.props),e)},handleChange:function(e){this.props.stopChangePropagation&&e.stopPropagation(),this.notify(e.target.value,e)},handleSelect:function(e){this.props.stopSelectPropagation&&e.stopPropagation(),(this.props.onSelect||i)(e)},notify:function(e,t){void 0===this.props.value&&this.setState({defaultValue:e}),(this.props.onChange||i)(e,this.props,t)},prepareProps:function(e,t){var n={};return a(n,e),n.value=this.prepareValue(n,t),n.valid=this.isValid(n),n.onClick=this.handleClick,n.onMouseDown=this.handleMouseDown,n.className=this.prepareClassName(n),n.style=this.prepareStyle(n),n.innerStyle=this.prepareInnerStyle(n),n},getValue:function(){var e=void 0===this.props.value?this.state.defaultValue:this.props.value;return e},prepareValue:function(){return this.getValue()},prepareClassName:function(e){var t=[e.className,e.defaultClassName];return this.isEmpty(e)&&t.push(e.emptyClassName),e.valid||t.push(e.invalidClassName),t.join(" ")},prepareStyle:function(e){var t=a({},e.defaultStyle,e.style);return e.valid||a(t,e.defaultInvalidStyle,e.invalidStyle),t},prepareInnerStyle:function(e){var t=a({},e.defaultInnerStyle,e.innerStyle);return o(t)},prepareInputProps:function(e){var t={className:e.inputClassName};return a(t,e.defaultInputProps,e.inputProps),t.key="field",t.value=e.value,t.placeholder=e.placeholder,t.onChange=this.handleChange,t.onSelect=this.handleSelect,t.style=this.prepareInputStyle(e),t.onFocus=this.handleFocus,t.onBlur=this.handleBlur,t.name=e.name,t.disabled=e.disabled,t.readOnly=e.readOnly,t},handleFocus:function(){this._focused=!0},handleBlur:function(){this._focused=!1},isFocused:function(){return!!this._focused},prepareInputStyle:function(e){var t=e.inputProps?e.inputProps.style:null,n=a({},e.defaultInputStyle,e.inputStyle,t);return e.valid||a(n,e.defaultInputInvalidStyle,e.inputInvalidStyle),o(n)},prepareClearToolStyle:function(e,t){var n,i,r;t&&t.clearToolOver&&(n=e.defaultClearToolOverStyle,i=e.clearToolOverStyle),e.clearToolColor&&(r={color:e.clearToolColor},t&&t.clearToolOver&&e.clearToolOverColor&&(r={color:e.clearToolOverColor}));var o=a({},e.defaultClearToolStyle,n,r,e.clearToolStyle,i);return o}},u=r.createClass(s);u.descriptor=s,e.exports=u},10,[32,6,5,8],[38,5,21,4],[34,24,8],[35,6,5,4],15,[33,25,23,27,28],17,[37,22],function(e,t){(function(t){"use strict";var n=t.document;e.exports=function(e){if(e.createTextRange&&!window.getSelection){var t=n.selection.createRange().duplicate();return t.moveStart("character",-e.value.length),t.text.length}return e.selectionEnd}}).call(t,function(){return this}())},function(e,t){(function(t){"use strict";var n=t.document;e.exports=function(e){if(e.createTextRange&&!window.getSelection){var t=n.selection.createRange().duplicate();return t.moveEnd("character",e.value.length),""==t.text?e.value.length:e.value.lastIndexOf(t.text)}return e.selectionStart}}).call(t,function(){return this}())},function(e,t){(function(t){"use strict";t.document;e.exports=function(e,t){var n=t.start,i=t.end;"function"==e.setSelectionRange?e.setSelectionRange(n,i):(e.selectionStart=n,e.selectionEnd=i)}}).call(t,function(){return this}())},function(e,t,n,i,a,r){"use strict";var o=n(i),l=n(a),s=n(r);e.exports=function(e){if(!s[e])return e;var t=l(e);return t?t+o(e):e}},function(e,t,n,i,a,r,o){"use strict";function l(e,t){var n={key:e,value:t};return(f.plugins||[]).forEach(function(i){var a=p(function(n){return i(e,t,n)},n);a&&(n=a)}),n}function s(e,t){var n=l(e,t);return p(function(e){return{key:c(e.key,e.value),value:e.value}},n)}var u=n(i),c=n(a),p=n(r),d=n(o),f=function(e){var t,n,i={};for(t in e)if(u(e,t)){if(n=s(t,e[t]),!n)continue;p(function(e){i[e.key]=e.value},n)}return i};e.exports=d(f)},function(e,t,n,i,a){"use strict";var r=n(i),o=n(a);e.exports=function(e,t){return o[e]?r(e,t):e}},function(e,t,n,i,a,r){"use strict";var o=n(i),l=n(a),s=n(r),u={},c=s.style;e.exports=function(e){var t=e;if(u[t])return u[t];var n,i;return e in c||(n=l("appearance"),n&&(i=n+o(e),i in c&&(e=i))),u[t]=e,e}},function(e,t,n,i,a){"use strict";var r,o=n(i),l=["ms","Moz","Webkit","O"],s=n(a);e.exports=function(e){if(r)return r;for(var t,n,i=0,a=l.length;a>i;i++)if(n=l[i],t=n+o(e),"undefined"!=typeof s.style[t])return r=n}},function(e,t,n,i){"use strict";var a=n(i);e.exports=function(e){return e.plugins=e.plugins||[function(){var e={flex:1,"inline-flex":1};return function(t,n){return"display"===t&&n in e?{key:t,value:a(t,n)}:void 0}}()],e.plugin=function(t){e.plugins=e.plugins||[],e.plugins.push(t)},e}},function(e,t,n,i,a,r){"use strict";var o=n(i),l=n(a),s=n(r),u={},c=s.style;e.exports=function(e,t){var n=e+": "+t;if(u[n])return u[n];var i,a,r;return e in c||(i=o("appearance"),i&&(a=l(e,t),r="-"+i.toLowerCase()+"-"+t,a in c&&(s.style[a]="",s.style[a]=r,""!==s.style[a]&&(t=r)))),u[n]=t,t}}]))});